{% extends 'autostop/base.html' %} 
{% load static %}
{% load i18n %} 

{% block head %}
    {% if current_lang == 'uk' %}
    <link rel="canonical" href="https://pidvezu.com.ua/applied_to_me/">
    <meta http-equiv="Content-Language" content="uk">
    <meta name="subject" content="–í–∞—à –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç (–∞–∫–∫–∞—É–Ω—Ç) –Ω–∞ Pidvezu">
    <meta name="description" content="–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –í–∞—à—ñ –º–∞—Ä—à—Ä—É—Ç–∏, —è–∫—ñ —Å—Ç–≤–æ—Ä–∏–ª–∏ –ª—é–¥–∏. –í–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–∏–π–Ω—è—Ç–∏ –∞–±–æ –≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ —ó—Ö.">
    {% else %}
    <link rel="canonical" href="https://pidvezu.com.ua/ru/applied_to_me/">
    <meta http-equiv="Content-Language" content="ru">
    <meta name="subject" content="–ó–∞—è–≤–∫–∏ –Ω–∞ –í–∞—à–∏ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞ Pidvezu">
    <meta name="description" content="–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –í–∞—à–∏ –º–∞—Ä—à—Ä—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞–ª–∏ –ª—é–¥–∏. –í—ã –º–æ–∂–µ—Ç–µ –ª–∏–±–æ –ø—Ä–∏–Ω—è—Ç—å, –ª–∏–±–æ –æ—Ç–∫–ª–æ–Ω—Ç—å –∏—Ö.">
    {% endif %}
{% endblock %}

{% block language %}<html lang="{{current_lang}}">{% endblock %}
{% block title %}{% translate "–ú–Ω–µ —Å–¥–µ–ª–∞–ª–∏ –∑–∞—è–≤–∫—É" %}{% endblock %}

{% block content %} 
<h1 class="applied_header">{% translate "–ó–∞—è–≤–∫–∏ –Ω–∞" %} <strong>{% translate "–í–∞—à–∏" %}</strong> {% translate "–º–∞—Ä—à—Ä—É—Ç—ã" %}</h1>
{% if routes %}
<h2 class="applied_to_me_tip">{% translate "–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—è–≤–∫–∏, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –º–∞—Ä—à—Ä—É—Ç—É, —á—Ç–æ–±—ã —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å" %}</h2>
{% endif %}

<div class="application_list">
{% for route, applications in routes.items %}
    <div class="applied_me_container">
        <a href="{% url 'autostop:route' route.slug %}" class="applied_me_title">{{route.first_last_location.0|truncatewords:4}} --- {{route.first_last_location.1|truncatewords:4}}</a>
        <ul class="applied_me_list">
            {% for application in applications %}
                <li>
                    <p class="applied_comment"><strong>{% translate "–ó–∞—è–≤—â–∏–∫" %}:</strong>
                        {% if application.author.first_name and application.author.last_name %}
                            {{application.author.first_name}} {{application.author.last_name}}
                        {% elif application.author.first_name %}
                            {{application.author.first_name}}
                        {% elif application.author.last_name %}
                            {{application.author.last_name}}
                        {% else %}
                            {{application.author.email}}
                        {% endif %}
                        <span style="margin-left: 5px;"><a href="tel:{{author.phone_number}}">{{application.author.phone_number}}</a></span>
                    </p>
                    <p class="applied_comment"><strong>{% translate "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" %}:</strong> {{application.comment}}</p>
                    <div style="margin-top: 7px;"><img src="{% static 'img/departure_arrow.svg' %}" alt="" class="departure_arrival_icon"><span>{{application.first_last_location.0}}</span></div>
                    <div style="margin-bottom: 7px;"><img src="{% static 'img/arrival_arrow.svg' %}" alt="" class="departure_arrival_icon"><span>{{application.first_last_location.1}}</span></div>

                    <p class="applied_rubric">
                        {% translate "–†—É–±—Ä–∏–∫–∞" %}:
                        {% for rubric in application.rubric %}
                            {% if rubric == 'people' %}
                                üßç {% translate "–õ—é–¥–∏" %}
                            {% elif rubric == 'animals' %}
                                üêï {% translate "–ñ–∏–≤–æ—Ç–Ω—ã–µ" %}
                            {% elif rubric == 'good' %}
                                üëñ {% translate "–í–µ—â–∏" %}
                            {% elif rubric == 'food' %}
                                ü•ï {% translate "–ü—Ä–æ–¥—É–∫—Ç—ã" %}
                            {% elif rubric == 'others' %}
                                {% translate "–î—Ä—É–≥–æ–µ" %}
                            {% endif %}
                        {% endfor %}
                    </p>  

                    <div class="applied_me_status">
                        {% if application.status == 'justified' %}
                            <a href="{% url 'autostop:reject_application' application.pk %}" class="reject_application">{% translate "–û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É" %}</a>
                            <span><strong>{% translate "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞" %}</strong></span>
                        {% elif application.status == 'considering' %}
                            <a href="{% url 'autostop:confirm_application' application.pk %}" class="confirm_application">{% translate "–ü–æ–¥–≤–µ–∑—É!" %}</a>
                            <a href="{% url 'autostop:reject_application' application.pk %}" class="reject_application">{% translate "–û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É" %}</a>
                            <span><strong>{% translate "–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏" %}</strong></span>
                        {% elif application.status == 'rejected' %}
                            <a href="{% url 'autostop:confirm_application' application.pk %}" class="confirm_application">{% translate "–ü–æ–¥–≤–µ–∑—É!" %}</a>
                            <span><strong>{% translate "–û—Ç–∫–ª–æ–Ω–µ–Ω–∞" %}</strong></span>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
{% empty %}
<style>
.application_list{
    display: block;
}
</style>
<h3 class="empty_list">{% translate "–ü–æ–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–µ—Ç. –í—ã –º–æ–∂–µ—Ç–µ" %} <a href="{% url 'autostop:add' %}">{% translate "–æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å" %}</a> {% translate "–Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç" %}.</h3>
<img src="{% static 'img/applied_to_me_empty.svg' %}" alt="" class="applied_to_me_image">
{% endfor %}
</div>
{% endblock %}